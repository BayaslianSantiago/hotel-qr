<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cargando Men√∫...</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  
  <style>
    /* --- TUS ESTILOS ORIGINALES (INTACTOS) --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0a1128 0%, #1e3a5f 100%);
      color: #ffffff;
      min-height: 100vh;
      padding-bottom: 80px;
    }
    header {
      background: linear-gradient(180deg, #0a1128 0%, #1a2947 100%);
      color: white;
      text-align: center;
      padding: 2em 1em;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    header h1 {
      font-size: 2.2em;
      font-weight: 300;
      letter-spacing: 2px;
      margin-bottom: 0.5em;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }
    .language-selector {
      position: absolute; top: 20px; right: 20px; display: flex; gap: 8px;
    }
    .lang-btn {
      background: rgba(255, 255, 255, 0.2); color: white; border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 8px; padding: 8px 12px; cursor: pointer; font-weight: 600; font-size: 0.85em; transition: all 0.3s ease;
    }
    .lang-btn:hover { background: rgba(255, 255, 255, 0.3); transform: scale(1.05); }
    .lang-btn.active { background: rgba(255, 255, 255, 0.95); color: #0a1128; }
    nav { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-top: 1.5em; padding: 0 1em; }
    nav button {
      background: rgba(255, 255, 255, 0.95); color: #0a1128; border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 25px; padding: 12px 24px; cursor: pointer; font-weight: 600; font-size: 0.95em;
      transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    nav button:hover { background: #ffffff; transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 255, 255, 0.3); }
    main { max-width: 1200px; margin: 0 auto; padding: 30px 20px; }
    .content-section { display: none; animation: fadeIn 0.5s ease-in; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .content-section.active { display: block; }
    h2 {
      color: #ffffff; font-size: 2em; font-weight: 300; letter-spacing: 1px;
      border-bottom: 3px solid rgba(255, 255, 255, 0.3); padding-bottom: 15px; margin-bottom: 25px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    h3 {
      color: #ffffff; font-size: 1.4em; font-weight: 400; margin: 25px 0 15px 0;
      padding-left: 10px; border-left: 4px solid rgba(255, 255, 255, 0.5);
    }
    ul { list-style: none; padding: 0; }
    ul li {
      background: rgba(255, 255, 255, 0.95); color: #0a1128; padding: 18px 20px; margin-bottom: 12px;
      border-radius: 12px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); transition: all 0.3s ease; line-height: 1.6;
    }
    ul li strong { color: #1a2947; font-size: 1.1em; }
    p {
      background: rgba(255, 255, 255, 0.95); color: #0a1128; padding: 18px 20px; margin-bottom: 15px;
      border-radius: 12px; line-height: 1.7; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    footer {
      background: linear-gradient(180deg, #1a2947 0%, #0a1128 100%); color: white; text-align: center;
      padding: 25px 20px; font-size: 0.95em; box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
      position: relative; margin-top: 50px; line-height: 1.8;
    }
    .whatsapp-button {
      position: fixed; bottom: 25px; right: 25px; background: linear-gradient(135deg, #25d366 0%, #20ba5a 100%);
      color: white; font-weight: 600; padding: 15px 25px; border-radius: 50px; text-decoration: none;
      box-shadow: 0 6px 25px rgba(37, 211, 102, 0.4); transition: all 0.3s ease; z-index: 999; font-size: 1em;
    }

    /* Estilos extra para la carga */
    .loader { text-align: center; padding: 40px; font-size: 1.2em; color: rgba(255,255,255,0.7); }
    .precio { float: right; font-weight: bold; color: #1a2947; }
  </style>
</head>
<body>
  <header>
    <div class="language-selector">
      <button class="lang-btn active">üá¶üá∑ ES</button>
      </div>
    
    <h1 id="main-title">Cargando Hotel...</h1>
    
    <nav id="dynamic-nav">
       </nav>
    
    <nav style="margin-top: 10px;">
        <button onclick="showSection('lavanderia')">Lavander√≠a</button>
        <button onclick="showSection('info')">Info General</button>
    </nav>
  </header>

  <main>
    <div id="loading-msg" class="loader">Conectando con la base de datos...</div>

    <div id="menu-dinamico"></div>

    <section id="lavanderia" class="content-section">
      <h2>Lavander√≠a</h2>
      <p>Servicio disponible de Lunes a Viernes. Consulte en recepci√≥n.</p>
    </section>

    <section id="info" class="content-section">
      <h2>Informaci√≥n General</h2>
      <ul>
        <li><strong>üèãÔ∏è Gimnasio:</strong> abierto 24 hs</li>
        <li><strong>üç≥ Desayuno:</strong> de 6:30 AM a 10:00 AM</li>
        <li><strong>üçΩÔ∏è Restaurante:</strong> de 07:00 a 00:00 hs</li>
      </ul>
    </section>
  </main>

  <footer>
    <p><strong>Gesti√≥n Digital de Men√∫</strong><br>
    Precios sujetos a modificaci√≥n en tiempo real.</p>
  </footer>

  <a href="https://wa.me/541163534421" target="_blank" class="whatsapp-button">
    üí¨ Contactar Recepci√≥n
  </a>

  <script>
    // --- 1. PEGA AQU√ç EL LINK DE TU GOOGLE SHEET (CSV) ---
    const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSRAsR0lBDpaN_aLY-nsevWiX-zMsqu9hJwUKaUzKv3BWBBlEW29rfdw3je_Ib7TJAr32M7bGeaVIi5/pubhtml';

    // --- 2. DETECTAR HOTEL ---
    // Busca si la URL tiene ?hotel=novotel o ?hotel=ibis
    const params = new URLSearchParams(window.location.search);
    // Si no hay parametro, por defecto muestra Novotel
    const currentHotel = params.get('hotel') || 'novotel'; 

    // Actualizar t√≠tulo de la p√°gina
    const titulos = {
        'novotel': 'Room Service Novotel',
        'ibis': 'Carta Ibis'
    };
    document.getElementById('main-title').textContent = titulos[currentHotel] || 'Men√∫ Digital';
    document.title = titulos[currentHotel];

    // --- 3. CARGAR DATOS ---
    function init() {
        Papa.parse(SHEET_URL, {
            download: true,
            header: true,
            complete: function(results) {
                renderMenu(results.data);
            },
            error: function(err) {
                document.getElementById('loading-msg').textContent = "Error al cargar men√∫. Intente recargar.";
                console.error(err);
            }
        });
    }

    function renderMenu(data) {
        const container = document.getElementById('menu-dinamico');
        const navContainer = document.getElementById('dynamic-nav');
        
        // A. Filtrar platos: Solo los de ESTE hotel y que est√©n disponibles
        const platos = data.filter(item => 
            item.hotel && 
            item.hotel.toLowerCase() === currentHotel.toLowerCase() && 
            item.disponible === 'TRUE'
        );

        if (platos.length === 0) {
            document.getElementById('loading-msg').textContent = "No hay platos disponibles por el momento.";
            return;
        }

        document.getElementById('loading-msg').style.display = 'none';

        // B. Agrupar por categor√≠as (Set elimina duplicados)
        const categorias = [...new Set(platos.map(item => item.categoria))];

        // C. Generar HTML
        categorias.forEach((catNombre, index) => {
            // 1. Crear Bot√≥n de Navegaci√≥n
            const btn = document.createElement('button');
            btn.textContent = catNombre;
            // Al hacer clic, scrollea hasta la secci√≥n
            btn.onclick = () => {
                showSection('menu-dinamico'); // Asegura que se vea el men√∫
                document.getElementById('cat-' + index).scrollIntoView({behavior: 'smooth'});
            };
            navContainer.appendChild(btn);

            // 2. Crear Secci√≥n de Platos
            const section = document.createElement('section');
            section.id = 'cat-' + index;
            section.className = 'content-section active'; // Visible por defecto
            section.style.display = 'block'; // Forzar display block dentro del container

            // T√≠tulo Categor√≠a
            const h2 = document.createElement('h2');
            h2.textContent = catNombre;
            section.appendChild(h2);

            // Lista de Platos
            const ul = document.createElement('ul');
            const platosDeEstaCat = platos.filter(p => p.categoria === catNombre);

            platosDeEstaCat.forEach(plato => {
                const li = document.createElement('li');
                // Formato de precio (Argentina)
                const precio = parseFloat(plato.precio).toLocaleString('es-AR', {
                    style: 'currency', currency: 'ARS', minimumFractionDigits: 0
                });

                li.innerHTML = `
                    <strong>${plato.nombre}</strong>
                    ${plato.descripcion ? `<br><small style="opacity:0.8">${plato.descripcion}</small>` : ''}
                    <span class="precio">${precio}</span>
                `;
                ul.appendChild(li);
            });

            section.appendChild(ul);
            container.appendChild(section);
        });
    }

    // Funci√≥n simple para ocultar men√∫ y mostrar info est√°tica
    function showSection(id) {
        // Ocultar todo
        document.getElementById('menu-dinamico').style.display = 'none';
        document.getElementById('lavanderia').style.display = 'none';
        document.getElementById('info').style.display = 'none';
        
        // Mostrar lo pedido
        const target = document.getElementById(id);
        if(target) target.style.display = 'block';
    }

    // Arrancar la app
    init();
  </script>
</body>
</html>
