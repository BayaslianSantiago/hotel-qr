<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cargando MenÃº...</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  
  <style>
    /* --- ESTILOS --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0a1128 0%, #1e3a5f 100%);
      color: #ffffff;
      min-height: 100vh;
      padding-bottom: 80px;
    }
    header {
      background: linear-gradient(180deg, #0a1128 0%, #1a2947 100%);
      color: white; text-align: center; padding: 2em 1em;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      position: relative;
    }
    header h1 {
      font-size: 2.2em; font-weight: 300; letter-spacing: 2px;
      margin-bottom: 0.5em; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }
    .language-selector {
      position: absolute; top: 20px; right: 20px; display: flex; gap: 8px;
    }
    .lang-btn {
      background: rgba(255, 255, 255, 0.2); color: white; border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 8px; padding: 8px 12px; cursor: pointer; font-weight: 600; font-size: 0.85em; transition: all 0.3s ease;
    }
    .lang-btn:hover { background: rgba(255, 255, 255, 0.3); transform: scale(1.05); }
    .lang-btn.active { background: rgba(255, 255, 255, 0.95); color: #0a1128; }
    
    nav { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-top: 1.5em; padding: 0 1em; }
    nav button {
      background: rgba(255, 255, 255, 0.95); color: #0a1128; border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 25px; padding: 12px 24px; cursor: pointer; font-weight: 600; font-size: 0.95em;
      transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    nav button:hover { background: #ffffff; transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 255, 255, 0.3); }
    
    main { max-width: 1200px; margin: 0 auto; padding: 30px 20px; }
    
    .content-section { display: none; animation: fadeIn 0.5s ease-in; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .content-section.active { display: block; }
    
    h2 {
      color: #ffffff; font-size: 2em; font-weight: 300; letter-spacing: 1px;
      border-bottom: 3px solid rgba(255, 255, 255, 0.3); padding-bottom: 15px; margin-bottom: 25px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    h3 {
      color: #ffffff; font-size: 1.4em; font-weight: 400; margin: 25px 0 15px 0;
      padding-left: 10px; border-left: 4px solid rgba(255, 255, 255, 0.5);
    }
    
    ul { list-style: none; padding: 0; }
    ul li {
      background: rgba(255, 255, 255, 0.95); color: #0a1128; padding: 18px 20px; margin-bottom: 12px;
      border-radius: 12px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); transition: all 0.3s ease; line-height: 1.6;
    }
    ul li strong { color: #1a2947; font-size: 1.1em; }
    p {
      background: rgba(255, 255, 255, 0.95); color: #0a1128; padding: 18px 20px; margin-bottom: 15px;
      border-radius: 12px; line-height: 1.7; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    footer {
      background: linear-gradient(180deg, #1a2947 0%, #0a1128 100%); color: white; text-align: center;
      padding: 25px 20px; font-size: 0.95em; box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
      position: relative; margin-top: 50px; line-height: 1.8;
    }
    .whatsapp-button {
      position: fixed; bottom: 25px; right: 25px; background: linear-gradient(135deg, #25d366 0%, #20ba5a 100%);
      color: white; font-weight: 600; padding: 15px 25px; border-radius: 50px; text-decoration: none;
      box-shadow: 0 6px 25px rgba(37, 211, 102, 0.4); transition: all 0.3s ease; z-index: 999; font-size: 1em;
    }
    
    @media (max-width: 768px) {
      header h1 { font-size: 1.6em; }
      .language-selector { position: static; justify-content: center; margin-bottom: 15px; }
      nav button { padding: 10px 18px; font-size: 0.9em; }
    }

    .loader { text-align: center; padding: 40px; font-size: 1.2em; opacity: 0.8; }
    .precio { float: right; font-weight: bold; color: #1a2947; }
    .legal-box { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px; }
    .legal-box p { background: transparent; color: white; box-shadow: none; padding: 5px; margin: 0; }
  </style>
</head>
<body>
  <header>
    <div class="language-selector">
      <button onclick="changeLanguage('es')" class="lang-btn active" id="lang-es">ðŸ‡¦ðŸ‡· ES</button>
      <button onclick="changeLanguage('en')" class="lang-btn" id="lang-en">ðŸ‡¬ðŸ‡§ EN</button>
      <button onclick="changeLanguage('pt')" class="lang-btn" id="lang-pt">ðŸ‡§ðŸ‡· PT</button>
    </div>
    
    <h1 id="main-title">Cargando Hotel...</h1>
    
    <nav id="dynamic-nav"></nav>
    
    <nav style="margin-top: 10px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
        <button onclick="renderLaundry()" id="btn-lav">LavanderÃ­a</button>
        <button onclick="showSection('info')" id="btn-info">InformaciÃ³n</button>
        <button onclick="showSection('sustentabilidad')" id="btn-sus">Sustentabilidad</button>
        <button onclick="showSection('codigo')" id="btn-cod">CÃ³digo Turista</button>
    </nav>
  </header>

  <main>
    <div id="loading-msg" class="loader">Conectando con la base de datos...</div>

    <div id="menu-dinamico"></div>

    <section id="lavanderia" class="content-section">
      <h2 id="title-lav">LavanderÃ­a</h2>
      <div class="legal-box">
          <p id="txt-lav-1"></p>
          <p id="txt-lav-2" style="font-size: 0.9em; opacity: 0.8; margin-top:10px;"></p>
      </div>
      <div id="lista-precios-lavanderia"></div>
    </section>

    <section id="sustentabilidad" class="content-section">
      <h2 id="title-sus">Sustentabilidad</h2>
      <p id="txt-sus"></p>
    </section>

    <section id="codigo" class="content-section">
      <h2 id="title-cod">CÃ³digo de Conducta</h2>
      <p id="txt-cod"></p>
    </section>

    <section id="info" class="content-section">
      <h2 id="title-info">InformaciÃ³n General</h2>
      <ul>
        <li><strong id="lbl-gym"></strong> 24 hs</li>
        <li><strong id="lbl-bkf"></strong> 6:30 AM - 10:00 AM</li>
        <li><strong id="lbl-rst"></strong> 07:00 - 00:00 hs</li>
      </ul>
    </section>
  </main>

  <footer>
    <p><strong id="footer-hotel-name"></strong><br>
    <span id="footer-hotel-address"></span></p>
  </footer>

  <a href="#" id="whatsapp-link" target="_blank" class="whatsapp-button">
    ðŸ’¬ WhatsApp
  </a>

  <script>
    // --- 1. CONFIGURACIÃ“N ---
    const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSRAsR0lBDpaN_aLY-nsevWiX-zMsqu9hJwUKaUzKv3BWBBlEW29rfdw3je_Ib7TJAr32M7bGeaVIi5/pub?output=csv';

    let currentLanguage = 'es'; 
    let allData = [];

    const params = new URLSearchParams(window.location.search);
    const currentHotel = params.get('hotel') || 'novotel'; 

    // ConfiguraciÃ³n especÃ­fica de cada hotel
    const hotelConfigs = {
        novotel: {
            nombre: "Novotel Buenos Aires",
            direccion: "Av. Corrientes 1334, CABA",
            whatsapp: "541163534421",
            msg: { es: "Hola Novotel! QuerÃ­a consultar por el Room Service.", en: "Hello Novotel! I'd like to ask about Room Service.", pt: "OlÃ¡ Novotel! Gostaria de saber sobre o Room Service." }
        },
        ibis: {
            nombre: "Ibis Buenos Aires Obelisco",
            direccion: "Av. Corrientes 1344, CABA",
            whatsapp: "541158384269",
            msg: { es: "Hola Ibis! QuerÃ­a consultar por la carta del restaurante.", en: "Hello Ibis! I'd like to see the restaurant menu.", pt: "OlÃ¡ Ibis! Gostaria de ver o cardÃ¡pio do restaurante." }
        }
    };

    const uiTranslations = {
        es: {
            titles: { novotel: 'Room Service Novotel', ibis: 'Carta Ibis', lav: 'LavanderÃ­a', info: 'InformaciÃ³n', sus: 'Sustentabilidad', cod: 'CÃ³digo de Conducta' },
            btns: { lav: 'LavanderÃ­a', info: 'InformaciÃ³n', sus: 'Sustentabilidad', cod: 'CÃ³digo Turista' },
            legal: { t1: 'ðŸ•’ Horarios: Lunes a Viernes hasta las 11hs.', t2: 'âš ï¸ Responsabilidad: Limitada a 5 veces el costo.' },
            info: { gym: 'ðŸ‹ï¸ Gimnasio:', bkf: 'ðŸ³ Desayuno:', rst: 'ðŸ½ï¸ Restaurante:' },
            sus: 'Promovemos prÃ¡cticas responsables y reducciÃ³n de plÃ¡sticos.',
            cod: 'Valore las tradiciones y apoye la economÃ­a local.'
        },
        en: {
            titles: { novotel: 'Novotel Room Service', ibis: 'Ibis Menu', lav: 'Laundry', info: 'Information', sus: 'Sustainability', cod: 'Tourist Code' },
            btns: { lav: 'Laundry', info: 'Info', sus: 'Sustainability', cod: 'Tourist Code' },
            legal: { t1: 'ðŸ•’ Schedule: Mon-Fri until 11 AM.', t2: 'âš ï¸ Liability: Limited to 5 times the cost.' },
            info: { gym: 'ðŸ‹ï¸ Gym:', bkf: 'ðŸ³ Breakfast:', rst: 'ðŸ½ï¸ Restaurant:' },
            sus: 'We promote responsible practices and plastic reduction.',
            cod: 'Value local traditions and support the local economy.'
        },
        pt: {
            titles: { novotel: 'Room Service Novotel', ibis: 'CardÃ¡pio Ibis', lav: 'Lavanderia', info: 'InformaÃ§Ã£o', sus: 'Sustentabilidade', cod: 'CÃ³digo de Conduta' },
            btns: { lav: 'Lavanderia', info: 'Info', sus: 'Sustentabilidade', cod: 'CÃ³digo' },
            legal: { t1: 'ðŸ•’ HorÃ¡rios: Seg-Sex atÃ© Ã s 11h.', t2: 'âš ï¸ Responsabilidade: Limitada a 5 vezes o custo.' },
            info: { gym: 'ðŸ‹ï¸ Academia:', bkf: 'ðŸ³ CafÃ© da ManhÃ£:', rst: 'ðŸ½ï¸ Restaurante:' },
            sus: 'Promovemos prÃ¡ticas responsÃ¡veis e reduÃ§Ã£o de plÃ¡sticos.',
            cod: 'Valorize as tradiÃ§Ãµes e apoie a economia local.'
        }
    };

    // --- 2. INICIALIZAR ---
    function init() {
        updateStaticUI();
        Papa.parse(SHEET_URL, {
            download: true, header: true,
            complete: function(results) {
                allData = results.data;
                renderApp();
            },
            error: function(err) {
                document.getElementById('loading-msg').textContent = "Error de conexiÃ³n";
            }
        });
    }

    function changeLanguage(lang) {
        currentLanguage = lang;
        document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById('lang-' + lang).classList.add('active');
        updateStaticUI();
        renderApp();
        if(document.getElementById('lavanderia').style.display === 'block') renderLaundry();
    }

    function updateStaticUI() {
        const t = uiTranslations[currentLanguage];
        const config = hotelConfigs[currentHotel] || hotelConfigs.novotel;

        // TÃ­tulos
        const mainTitle = currentHotel === 'novotel' ? t.titles.novotel : t.titles.ibis;
        document.getElementById('main-title').textContent = mainTitle;
        document.title = mainTitle;

        // Botones y Secciones
        document.getElementById('btn-lav').textContent = t.btns.lav;
        document.getElementById('btn-info').textContent = t.btns.info;
        document.getElementById('btn-sus').textContent = t.btns.sus;
        document.getElementById('btn-cod').textContent = t.btns.cod;
        document.getElementById('title-lav').textContent = t.titles.lav;
        document.getElementById('title-info').textContent = t.titles.info;
        document.getElementById('title-sus').textContent = t.titles.sus;
        document.getElementById('title-cod').textContent = t.titles.cod;

        // Textos legales e info
        document.getElementById('txt-lav-1').innerHTML = `<strong>${t.legal.t1}</strong>`;
        document.getElementById('txt-lav-2').innerHTML = `<strong>${t.legal.t2}</strong>`;
        document.getElementById('lbl-gym').textContent = t.info.gym;
        document.getElementById('lbl-bkf').textContent = t.info.bkf;
        document.getElementById('lbl-rst').textContent = t.info.rst;
        document.getElementById('txt-sus').textContent = t.sus;
        document.getElementById('txt-cod').textContent = t.cod;

        // CONTACTOS DINÃMICOS (Novotel vs Ibis)
        document.getElementById('footer-hotel-name').textContent = config.nombre;
        document.getElementById('footer-hotel-address').textContent = config.direccion;
        
        const mensajeWa = encodeURIComponent(config.msg[currentLanguage]);
        document.getElementById('whatsapp-link').href = `https://wa.me/${config.whatsapp}?text=${mensajeWa}`;
    }

    // --- 4. RENDERIZAR MENÃš ---
    function renderApp() {
        const container = document.getElementById('menu-dinamico');
        const navContainer = document.getElementById('dynamic-nav');
        container.innerHTML = '';
        navContainer.innerHTML = '';

        const colNombre = `nombre_${currentLanguage}`;
        const colDesc = `descripcion_${currentLanguage}`;
        const colCat = `categoria_${currentLanguage}`;

        const platos = allData.filter(item => 
            item.hotel && item.hotel.toLowerCase() === currentHotel.toLowerCase() && item.disponible === 'TRUE'
        );

        if (platos.length === 0 && allData.length > 0) {
            document.getElementById('loading-msg').textContent = "No hay menÃº disponible.";
            return;
        } else if (allData.length > 0) {
             document.getElementById('loading-msg').style.display = 'none';
        }

        const categorias = [...new Set(platos.map(item => item[colCat]))];

        categorias.forEach((catNombre, index) => {
            if (!catNombre) return;
            const btn = document.createElement('button');
            btn.textContent = catNombre;
            btn.onclick = () => {
                showSection('menu-dinamico');
                setTimeout(() => {
                    document.getElementById('cat-' + index).scrollIntoView({behavior: 'smooth'});
                }, 50);
            };
            navContainer.appendChild(btn);

            const section = document.createElement('section');
            section.id = 'cat-' + index;
            section.className = 'content-section active';
            section.style.display = 'block';

            const h2 = document.createElement('h2');
            h2.textContent = catNombre;
            section.appendChild(h2);

            const ul = document.createElement('ul');
            platos.filter(p => p[colCat] === catNombre).forEach(plato => {
                const li = document.createElement('li');
                const pVal = parseFloat(plato.precio) || 0;
                const precio = pVal.toLocaleString('es-AR', { style: 'currency', currency: 'ARS', minimumFractionDigits: 0 });
                li.innerHTML = `<strong>${plato[colNombre]}</strong>${plato[colDesc] ? `<br><small style="opacity:0.8">${plato[colDesc]}</small>` : ''}<span class="precio">${precio}</span>`;
                ul.appendChild(li);
            });
            section.appendChild(ul);
            container.appendChild(section);
        });
    }

    function renderLaundry() {
        showSection('lavanderia');
        const container = document.getElementById('lista-precios-lavanderia');
        container.innerHTML = '';
        const colNombre = `nombre_${currentLanguage}`;
        const colCat = `categoria_${currentLanguage}`;
        const items = allData.filter(item => item.hotel === 'lavanderia' && item.disponible === 'TRUE');
        const categorias = [...new Set(items.map(item => item[colCat]))];

        categorias.forEach(catNombre => {
            if (!catNombre) return;
            const h3 = document.createElement('h3');
            h3.textContent = catNombre;
            container.appendChild(h3);
            const ul = document.createElement('ul');
            items.filter(p => p[colCat] === catNombre).forEach(prenda => {
                const li = document.createElement('li');
                const pVal = parseFloat(prenda.precio) || 0;
                const precio = pVal.toLocaleString('es-AR', { style: 'currency', currency: 'ARS', minimumFractionDigits: 0 });
                li.innerHTML = `<strong>${prenda[colNombre]}</strong><span class="precio">${precio}</span>`;
                ul.appendChild(li);
            });
            container.appendChild(ul);
        });
    }

    function showSection(id) {
        const sections = ['menu-dinamico', 'lavanderia', 'info', 'sustentabilidad', 'codigo'];
        sections.forEach(sec => {
            const el = document.getElementById(sec);
            if(el) el.style.display = (sec === id) ? 'block' : 'none';
        });
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    init();
  </script>
</body>
</html>
